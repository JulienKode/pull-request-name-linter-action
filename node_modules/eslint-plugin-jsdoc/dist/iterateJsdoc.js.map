{"version":3,"sources":["../src/iterateJsdoc.js"],"names":["globalState","Map","skipSeeLink","parser","str","data","tag","match","parseComment","commentNode","indent","trim","value","parsers","commentParser","PARSERS","parse_tag","includes","parse_type","parse_name","errors","length","result","description","undefined","source","getBasicUtils","context","tagNamePreference","mode","utils","reportSettings","message","report","loc","start","column","line","getPreferredTagNameObject","tagName","ret","jsdocUtils","getPreferredTagName","isObject","replacement","blocked","getUtils","node","jsdoc","jsdocNode","settings","iteratingAll","ruleConfig","ancestors","getAncestors","sourceCode","getSourceCode","overrideReplacesDocs","implementsReplacesDocs","augmentsExtendsReplacesDocs","maxLines","minLines","isIteratingFunction","type","isVirtualFunction","hasATag","stringify","tagBlock","getIndent","slice","reportJSDoc","msg","handler","fixer","replaceText","getFunctionParameterNames","isConstructor","parent","kind","isGetter","isSetter","getJsdocTagsDeep","name","getJsdocTags","skipReportingBlockedTag","allowObjectReturn","defaultMessage","hasTag","getTags","isValidTag","definedTags","hasSchemaOption","prop","schemaProperties","meta","schema","properties","_","get","default","avoidDocs","classHasTag","exemptedBy","getPresentTags","tagMustHaveEitherTypeOrNamePosition","tagMightHaveEitherTypeOrNamePosition","tagMustHaveNamePosition","tagMightHaveNamePosition","tagMustHaveTypePosition","tagMightHaveTypePosition","isNamepathDefiningTag","hasDefinedTypeReturnTag","hasReturnValue","isAsync","async","filterTags","item","tagList","filter","tags","getTagsByType","hasOptionTag","Boolean","getClassNode","reverse","find","getClassJsdoc","classNode","classJsdocNode","repeat","classJsdoc","forEachPreferredTag","arrayHandler","targetTagName","matchingJsdocTags","forEach","matchingJsdocTag","getSettings","ignorePrivate","Number","preferredTypes","makeReport","fix","jsdocLoc","lineNumber","end","colNumber","iterate","lines","iterator","state","sourceLine","charAt","noTrim","checkPrivate","some","iterateAllJsdocs","trackedJsdocs","callIterator","jsdocNodes","lastCall","test","getText","exit","create","reducedNode","comment","nonComment","push","allComments","getAllComments","untrackedJSdoc","checkFile","iterateJsdoc","metaType","TypeError","contexts","contextDefaults","enforcedContexts","checkJsdoc","getContextObject","ArrowFunctionExpression","FunctionDeclaration","FunctionExpression"],"mappings":"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","sourcesContent":["// eslint-disable-next-line import/no-named-default\nimport {default as commentParser, stringify as commentStringify} from 'comment-parser';\nimport _ from 'lodash';\nimport jsdocUtils from './jsdocUtils';\nimport getJSDocComment, {getReducedASTNode} from './eslint/getJSDocComment';\n\nconst globalState = new Map();\n\nconst skipSeeLink = (parser) => {\n  return (str, data) => {\n    if (data.tag === 'see' && str.match(/\\{@link.+?\\}/u)) {\n      return null;\n    }\n\n    return parser(str, data);\n  };\n};\n\n/**\n *\n * @param {object} commentNode\n * @param {string} indent Whitespace\n * @param {boolean} [trim=true]\n * @returns {object}\n */\nconst parseComment = (commentNode, indent, trim = true) => {\n  // Preserve JSDoc block start/end indentation.\n  return commentParser(`${indent}/*${commentNode.value}${indent}*/`, {\n    // @see https://github.com/yavorskiy/comment-parser/issues/21\n    parsers: [\n      commentParser.PARSERS.parse_tag,\n      skipSeeLink(\n        (str, data) => {\n          if (['default', 'defaultvalue'].includes(data.tag)) {\n            return null;\n          }\n\n          return commentParser.PARSERS.parse_type(str, data);\n        },\n      ),\n      skipSeeLink(\n        (str, data) => {\n          if ([\n            'example', 'return', 'returns', 'throws', 'exception',\n            'access', 'version', 'since', 'license', 'author',\n            'default', 'defaultvalue',\n          ].includes(data.tag)) {\n            return null;\n          }\n\n          return commentParser.PARSERS.parse_name(str, data);\n        },\n      ),\n\n      // parse_description\n      (str, data) => {\n        // Only expected throw in previous step is if bad name (i.e.,\n        //   missing end bracket on optional name), but `@example`\n        //  skips name parsing\n        /* istanbul ignore next */\n        if (data.errors && data.errors.length) {\n          return null;\n        }\n\n        // Tweak original regex to capture only single optional space\n        const result = str.match(/^ ?((.|\\s)+)?/u);\n\n        // Always has at least whitespace due to `indent` we've added\n        /* istanbul ignore next */\n        if (result) {\n          return {\n            data: {\n              description: result[1] === undefined ? '' : result[1],\n            },\n            source: result[0],\n          };\n        }\n\n        // Always has at least whitespace due to `indent` we've added\n        /* istanbul ignore next */\n        return null;\n      },\n    ],\n    trim,\n  })[0] || {};\n};\n\nconst getBasicUtils = (context, {tagNamePreference, mode}) => {\n  const utils = {};\n  utils.reportSettings = (message) => {\n    context.report({\n      loc: {\n        start: {\n          column: 1,\n          line: 1,\n        },\n      },\n      message,\n    });\n  };\n\n  utils.getPreferredTagNameObject = ({tagName}) => {\n    const ret = jsdocUtils.getPreferredTagName(context, mode, tagName, tagNamePreference);\n    const isObject = ret && typeof ret === 'object';\n    if (ret === false || isObject && !ret.replacement) {\n      return {\n        blocked: true,\n        tagName,\n      };\n    }\n\n    return ret;\n  };\n\n  return utils;\n};\n\nconst getUtils = (\n  node,\n  jsdoc,\n  jsdocNode,\n  settings,\n  report,\n  context,\n  iteratingAll,\n  ruleConfig,\n) => {\n  const ancestors = context.getAncestors();\n  const sourceCode = context.getSourceCode();\n\n  const utils = getBasicUtils(context, settings);\n\n  const {\n    tagNamePreference,\n    overrideReplacesDocs,\n    implementsReplacesDocs,\n    augmentsExtendsReplacesDocs,\n    maxLines,\n    minLines,\n    mode,\n  } = settings;\n\n  utils.isIteratingFunction = () => {\n    return !iteratingAll || [\n      'ArrowFunctionExpression',\n      'FunctionDeclaration',\n      'FunctionExpression',\n    ].includes(node && node.type);\n  };\n\n  utils.isVirtualFunction = () => {\n    return iteratingAll && utils.hasATag(['callback', 'function', 'func', 'method']);\n  };\n\n  utils.stringify = (tagBlock) => {\n    const indent = jsdocUtils.getIndent(sourceCode);\n\n    return commentStringify([tagBlock], {indent}).slice(indent.length - 1);\n  };\n\n  utils.reportJSDoc = (msg, tag, handler) => {\n    report(msg, handler ? (fixer) => {\n      handler();\n      const replacement = utils.stringify(jsdoc);\n\n      return fixer.replaceText(jsdocNode, replacement);\n    } : null, tag);\n  };\n\n  utils.getFunctionParameterNames = () => {\n    return jsdocUtils.getFunctionParameterNames(node);\n  };\n\n  utils.isConstructor = () => {\n    return node && node.parent && node.parent.kind === 'constructor';\n  };\n\n  utils.isGetter = () => {\n    return node && node.parent.kind === 'get';\n  };\n\n  utils.isSetter = () => {\n    return node && node.parent.kind === 'set';\n  };\n\n  utils.getJsdocTagsDeep = (tagName) => {\n    const name = utils.getPreferredTagName({tagName});\n    if (!name) {\n      return false;\n    }\n\n    return jsdocUtils.getJsdocTagsDeep(jsdoc, name);\n  };\n\n  utils.getJsdocTags = (tagName) => {\n    const name = utils.getPreferredTagName({tagName});\n    if (!name) {\n      return false;\n    }\n\n    return jsdocUtils.getJsdocTags(jsdoc, name);\n  };\n\n  utils.getPreferredTagName = ({tagName, skipReportingBlockedTag = false, allowObjectReturn = false, defaultMessage = `Unexpected tag \\`@${tagName}\\``}) => {\n    const ret = jsdocUtils.getPreferredTagName(context, mode, tagName, tagNamePreference);\n    const isObject = ret && typeof ret === 'object';\n    if (utils.hasTag(tagName) && (ret === false || isObject && !ret.replacement)) {\n      if (skipReportingBlockedTag) {\n        return {\n          blocked: true,\n          tagName,\n        };\n      }\n      const message = isObject && ret.message || defaultMessage;\n      report(message, null, utils.getTags(tagName)[0]);\n\n      return false;\n    }\n\n    return isObject && !allowObjectReturn ? ret.replacement : ret;\n  };\n\n  utils.isValidTag = (name, definedTags) => {\n    return jsdocUtils.isValidTag(context, mode, name, definedTags);\n  };\n\n  utils.hasATag = (name) => {\n    return jsdocUtils.hasATag(jsdoc, name);\n  };\n\n  utils.hasTag = (name) => {\n    return jsdocUtils.hasTag(jsdoc, name);\n  };\n\n  const hasSchemaOption = (prop) => {\n    const schemaProperties = ruleConfig.meta.schema[0].properties;\n\n    return _.get(\n      context,\n      `options[0].${prop}`,\n      schemaProperties[prop] && schemaProperties[prop].default,\n    );\n  };\n\n  // eslint-disable-next-line complexity\n  utils.avoidDocs = () => {\n    if (\n      overrideReplacesDocs !== false &&\n        (utils.hasTag('override') || utils.classHasTag('override')) ||\n      implementsReplacesDocs !== false &&\n        (utils.hasTag('implements') || utils.classHasTag('implements')) ||\n\n      augmentsExtendsReplacesDocs &&\n        (utils.hasATag(['augments', 'extends']) ||\n          utils.classHasTag('augments') ||\n            utils.classHasTag('extends'))) {\n      return true;\n    }\n\n    if (\n      !hasSchemaOption('checkConstructors') &&\n        (\n          utils.isConstructor() ||\n          utils.hasATag([\n            'class',\n            'constructor',\n          ])) ||\n      !hasSchemaOption('checkGetters') &&\n        utils.isGetter() ||\n      !hasSchemaOption('checkSetters') &&\n        utils.isSetter()) {\n      return true;\n    }\n\n    const exemptedBy = _.get(\n      context, 'options[0].exemptedBy', [\n        'inheritDoc',\n        ...settings.mode === 'closure' ? [] : ['inheritdoc'],\n      ],\n    );\n    if (exemptedBy.length && utils.getPresentTags(exemptedBy).length) {\n      return true;\n    }\n\n    return false;\n  };\n\n  utils.tagMustHaveEitherTypeOrNamePosition = (tagName) => {\n    return jsdocUtils.tagMustHaveEitherTypeOrNamePosition(tagName);\n  };\n\n  utils.tagMightHaveEitherTypeOrNamePosition = (tagName) => {\n    return jsdocUtils.tagMightHaveEitherTypeOrNamePosition(mode, tagName);\n  };\n\n  utils.tagMustHaveNamePosition = (tagName) => {\n    return jsdocUtils.tagMustHaveNamePosition(tagName);\n  };\n\n  utils.tagMightHaveNamePosition = (tagName) => {\n    return jsdocUtils.tagMightHaveNamePosition(tagName);\n  };\n\n  utils.tagMustHaveTypePosition = (tagName) => {\n    return jsdocUtils.tagMustHaveTypePosition(mode, tagName);\n  };\n\n  utils.tagMightHaveTypePosition = (tagName) => {\n    return jsdocUtils.tagMightHaveTypePosition(mode, tagName);\n  };\n\n  utils.isNamepathDefiningTag = (tagName) => {\n    return jsdocUtils.isNamepathDefiningTag(tagName);\n  };\n\n  utils.hasDefinedTypeReturnTag = (tag) => {\n    return jsdocUtils.hasDefinedTypeReturnTag(tag);\n  };\n\n  utils.hasReturnValue = () => {\n    return jsdocUtils.hasReturnValue(node);\n  };\n\n  utils.isAsync = () => {\n    return node.async;\n  };\n\n  utils.getTags = (tagName) => {\n    return utils.filterTags((item) => {\n      return item.tag === tagName;\n    });\n  };\n\n  utils.getPresentTags = (tagList) => {\n    return utils.filterTags((tag) => {\n      return tagList.includes(tag.tag);\n    });\n  };\n\n  utils.filterTags = (filter) => {\n    return jsdocUtils.filterTags(jsdoc.tags, filter);\n  };\n\n  utils.getTagsByType = (tags) => {\n    return jsdocUtils.getTagsByType(context, mode, tags, tagNamePreference);\n  };\n\n  utils.hasOptionTag = (tagName) => {\n    const tags = _.get(context, 'options[0].tags');\n\n    return Boolean(tags && tags.includes(tagName));\n  };\n\n  utils.getClassNode = () => {\n    return [...ancestors, node].reverse().find((parent) => {\n      return parent && ['ClassDeclaration', 'ClassExpression'].includes(parent.type);\n    }) || null;\n  };\n\n  utils.getClassJsdoc = () => {\n    const classNode = utils.getClassNode();\n\n    if (!classNode) {\n      return null;\n    }\n\n    const classJsdocNode = getJSDocComment(sourceCode, classNode, {\n      maxLines,\n      minLines,\n    });\n\n    if (classJsdocNode) {\n      const indent = ' '.repeat(classJsdocNode.loc.start.column);\n\n      return parseComment(classJsdocNode, indent);\n    }\n\n    return null;\n  };\n\n  utils.classHasTag = (tagName) => {\n    const classJsdoc = utils.getClassJsdoc();\n\n    return Boolean(classJsdoc) && jsdocUtils.hasTag(classJsdoc, tagName);\n  };\n\n  utils.forEachPreferredTag = (tagName, arrayHandler, skipReportingBlockedTag = false) => {\n    const targetTagName = utils.getPreferredTagName({\n      skipReportingBlockedTag,\n      tagName,\n    });\n    if (!targetTagName ||\n      skipReportingBlockedTag && targetTagName && typeof targetTagName === 'object'\n    ) {\n      return;\n    }\n    const matchingJsdocTags = _.filter(jsdoc.tags || [], {\n      tag: targetTagName,\n    });\n\n    matchingJsdocTags.forEach((matchingJsdocTag) => {\n      arrayHandler(matchingJsdocTag, targetTagName);\n    });\n  };\n\n  return utils;\n};\n\nconst getSettings = (context) => {\n  /* eslint-disable sort-keys-fix/sort-keys-fix */\n  const settings = {\n    // All rules\n    ignorePrivate: Boolean(_.get(context, 'settings.jsdoc.ignorePrivate')),\n    maxLines: Number(_.get(context, 'settings.jsdoc.maxLines', 1)),\n    minLines: Number(_.get(context, 'settings.jsdoc.minLines', 0)),\n\n    // `check-tag-names` and many returns/param rules\n    tagNamePreference: _.get(context, 'settings.jsdoc.tagNamePreference') || {},\n\n    // `check-types` and `no-undefined-types`\n    preferredTypes: _.get(context, 'settings.jsdoc.preferredTypes') || {},\n\n    // `require-param`, `require-description`, `require-example`, `require-returns`\n    overrideReplacesDocs: _.get(context, 'settings.jsdoc.overrideReplacesDocs'),\n    implementsReplacesDocs: _.get(context, 'settings.jsdoc.implementsReplacesDocs'),\n    augmentsExtendsReplacesDocs: _.get(context, 'settings.jsdoc.augmentsExtendsReplacesDocs'),\n\n    // Many rules, e.g., `check-tag-names`\n    mode: _.get(context, 'settings.jsdoc.mode') || 'jsdoc',\n  };\n  /* eslint-enable sort-keys-fix/sort-keys-fix */\n\n  return settings;\n};\n\n/**\n * Create the report function\n *\n * @param {object} context\n * @param {object} commentNode\n */\nconst makeReport = (context, commentNode) => {\n  const report = (message, fix = null, jsdocLoc = null, data = null) => {\n    let loc;\n\n    if (jsdocLoc) {\n      const lineNumber = commentNode.loc.start.line + jsdocLoc.line;\n\n      loc = {\n        end: {line: lineNumber},\n        start: {line: lineNumber},\n      };\n      if (jsdocLoc.column) {\n        const colNumber = commentNode.loc.start.column + jsdocLoc.column;\n\n        loc.end.column = colNumber;\n        loc.start.column = colNumber;\n      }\n    }\n\n    context.report({\n      data,\n      fix,\n      loc,\n      message,\n      node: commentNode,\n    });\n  };\n\n  return report;\n};\n\n/**\n * @typedef {ReturnType<typeof getUtils>} Utils\n * @typedef {ReturnType<typeof getSettings>} Settings\n * @typedef {(\n *   arg: {\n *     context: object,\n *     sourceCode: object,\n *     indent: string,\n *     jsdoc: object,\n *     jsdocNode: object,\n *     node: object | null,\n *     report: ReturnType<typeof makeReport>,\n *     settings: Settings,\n *     utils: Utils,\n *   }\n * ) => any } JsdocVisitor\n */\n\nconst iterate = (\n  ruleConfig, context, lines, jsdocNode, node, settings,\n  sourceCode, iterator, state, iteratingAll,\n) => {\n  const sourceLine = lines[jsdocNode.loc.start.line - 1];\n  const indent = sourceLine.charAt(0).repeat(jsdocNode.loc.start.column);\n  const jsdoc = parseComment(jsdocNode, indent, !ruleConfig.noTrim);\n  const report = makeReport(context, jsdocNode);\n\n  const utils = getUtils(\n    node,\n    jsdoc,\n    jsdocNode,\n    settings,\n    report,\n    context,\n    iteratingAll,\n    ruleConfig,\n  );\n\n  if (\n    settings.ignorePrivate &&\n    !ruleConfig.checkPrivate &&\n    (utils.hasTag('private') || _.filter(jsdoc.tags, {\n      tag: 'access',\n    }).some(({description}) => {\n      return description === 'private';\n    }))\n  ) {\n    return;\n  }\n\n  iterator({\n    context,\n    globalState,\n    indent,\n    iteratingAll,\n    jsdoc,\n    jsdocNode,\n    node,\n    report,\n    settings,\n    sourceCode,\n    state,\n    utils,\n  });\n};\n\n/**\n * Create an eslint rule that iterates over all JSDocs, regardless of whether\n * they are attached to a function-like node.\n *\n * @param {JsdocVisitor} iterator\n * @param {{meta: any}} ruleConfig\n */\nconst iterateAllJsdocs = (iterator, ruleConfig) => {\n  const trackedJsdocs = [];\n\n  const callIterator = (context, node, jsdocNodes, state, lastCall) => {\n    const sourceCode = context.getSourceCode();\n    const settings = getSettings(context);\n    const {lines} = sourceCode;\n\n    const utils = getBasicUtils(context, settings);\n    jsdocNodes.forEach((jsdocNode) => {\n      if (!(/^\\/\\*\\*\\s/).test(sourceCode.getText(jsdocNode))) {\n        return;\n      }\n      iterate(\n        ruleConfig, context, lines, jsdocNode, node,\n        settings, sourceCode, iterator,\n        state, true,\n      );\n    });\n    if (lastCall && ruleConfig.exit) {\n      ruleConfig.exit({\n        context,\n        state,\n        utils,\n      });\n    }\n  };\n\n  return {\n    create (context) {\n      const sourceCode = context.getSourceCode();\n      const settings = getSettings(context);\n      const state = {};\n\n      return {\n        '*:not(Program)' (node) {\n          const reducedNode = getReducedASTNode(node, sourceCode);\n\n          if (node !== reducedNode) {\n            return;\n          }\n\n          const comment = getJSDocComment(sourceCode, node, settings);\n          if (trackedJsdocs.includes(comment)) {\n            return;\n          }\n          if (!comment) {\n            if (ruleConfig.nonComment) {\n              ruleConfig.nonComment({\n                node,\n                state,\n              });\n            }\n\n            return;\n          }\n\n          trackedJsdocs.push(comment);\n          callIterator(context, node, [comment], state);\n        },\n        'Program:exit' () {\n          const allComments = sourceCode.getAllComments();\n          const untrackedJSdoc = allComments.filter((node) => {\n            return !trackedJsdocs.includes(node);\n          });\n\n          callIterator(context, null, untrackedJSdoc, state, true);\n        },\n      };\n    },\n    meta: ruleConfig.meta,\n  };\n};\n\n/**\n * Create an eslint rule that iterates over all JSDocs, regardless of whether\n * they are attached to a function-like node.\n *\n * @param {JsdocVisitor} iterator\n * @param {{meta: any}} ruleConfig\n */\nconst checkFile = (iterator, ruleConfig) => {\n  return {\n    create (context) {\n      const sourceCode = context.getSourceCode();\n      const settings = getSettings(context);\n\n      return {\n        'Program:exit' () {\n          const allComments = sourceCode.getAllComments();\n          const {lines} = sourceCode;\n          const utils = getBasicUtils(context, settings);\n\n          iterator({\n            allComments,\n            context,\n            lines,\n            makeReport,\n            settings,\n            sourceCode,\n            utils,\n          });\n        },\n      };\n    },\n    meta: ruleConfig.meta,\n  };\n};\n\nexport {\n  getSettings,\n  parseComment,\n};\n\n/**\n * @param {JsdocVisitor} iterator\n * @param {{\n *   meta: any,\n *   contextDefaults?: true | string[],\n *   iterateAllJsdocs?: true,\n * }} ruleConfig\n */\nexport default function iterateJsdoc (iterator, ruleConfig) {\n  const metaType = _.get(ruleConfig, 'meta.type');\n  if (!metaType || !['problem', 'suggestion', 'layout'].includes(metaType)) {\n    throw new TypeError('Rule must include `meta.type` option (with value \"problem\", \"suggestion\", or \"layout\")');\n  }\n  if (typeof iterator !== 'function') {\n    throw new TypeError('The iterator argument must be a function.');\n  }\n\n  if (ruleConfig.checkFile) {\n    return checkFile(iterator, ruleConfig);\n  }\n\n  if (ruleConfig.iterateAllJsdocs) {\n    return iterateAllJsdocs(iterator, ruleConfig);\n  }\n\n  return {\n    /**\n     * The entrypoint for the JSDoc rule.\n     *\n     * @param {*} context\n     *   a reference to the context which hold all important information\n     *   like settings and the sourcecode to check.\n     * @returns {object}\n     *   a list with parser callback function.\n     */\n    create (context) {\n      let contexts;\n      if (ruleConfig.contextDefaults) {\n        contexts = jsdocUtils.enforcedContexts(context, ruleConfig.contextDefaults);\n        if (contexts.includes('any')) {\n          return iterateAllJsdocs(iterator, ruleConfig).create(context);\n        }\n      }\n\n      const sourceCode = context.getSourceCode();\n      const settings = getSettings(context);\n      const {lines} = sourceCode;\n\n      const checkJsdoc = (node) => {\n        const jsdocNode = getJSDocComment(sourceCode, node, settings);\n\n        if (!jsdocNode) {\n          return;\n        }\n\n        iterate(\n          ruleConfig, context, lines, jsdocNode, node,\n          settings, sourceCode, iterator,\n        );\n      };\n\n      if (ruleConfig.contextDefaults) {\n        return jsdocUtils.getContextObject(contexts, checkJsdoc);\n      }\n\n      return {\n        ArrowFunctionExpression: checkJsdoc,\n        FunctionDeclaration: checkJsdoc,\n        FunctionExpression: checkJsdoc,\n      };\n    },\n    meta: ruleConfig.meta,\n  };\n}\n"],"file":"iterateJsdoc.js"}